---
title: åœ¨CMakeæ„å»ºçš„é¡¹ç›®ä¸­å¼•å…¥ç¬¬ä¸‰æ–¹åº“
date: 2024-10-12 18:55:58
permalink: /pages/931734/
categories:
  - CMakeç¬”è®°
tags:
  - 
author: 
  name: å¤é»è¾°
  link: https://github.com/zcy946
---
å¼•å…¥ç¬¬ä¸‰æ–¹åº“çš„æ–¹å¼ä¸€èˆ¬åˆ†ä¸ºä¸¤ç§

- æ‰‹åŠ¨å¼•å…¥
- åˆ©ç”¨`find_package`å‘½ä»¤è‡ªåŠ¨æ‰¾åŒ…

## ä¸€ã€æ‰‹åŠ¨å¼•å…¥

### æµç¨‹åˆ†æ

1. è®¾ç½®`å¤´æ–‡ä»¶è·¯å¾„`
2. è®¾ç½®`åº“æ–‡ä»¶è·¯å¾„`
3. è®¾ç½®`ç”¨åˆ°çš„åº“æ–‡ä»¶`
4. æŒ‡å®š`å¤´æ–‡ä»¶æœç´¢è·¯å¾„`
5. æŒ‡å®š`åº“æ–‡ä»¶æœç´¢è·¯å¾„`
6. é“¾æ¥`åº“æ–‡ä»¶`

#### 1. è®¾ç½®`å¤´æ–‡ä»¶`è·¯å¾„

```cmake
# ä»¥jsoncppä¸ºä¾‹
set(jsoncpp_INCLUDE_DIRS "E:/Cpp/Libs/jsoncpp/include")
```

#### 2. è®¾ç½®`åº“æ–‡ä»¶`è·¯å¾„

```cmake
set(jsoncpp_LIBRARY_PATH "E:/Cpp/Libs/jsoncpp/bin/release")
```

#### 3. è®¾ç½®`ç”¨åˆ°çš„åº“`æ–‡ä»¶

```cmake
set(jsoncpp_LIBRARIES "libjsoncpp_static.a") # ä½¿ç”¨é™æ€åº“
# or
set(jsoncpp_LIBRARIES "libjsoncpp.dll.a") # ä½¿ç”¨åŠ¨æ€åº“
# æ³¨æ„: ä½¿ç”¨åŠ¨æ€åº“æ—¶åº”é“¾æ¥åŠ¨æ€åº“çš„å¯¼å…¥åº“å³`*.dll.a`è€Œä¸æ˜¯åŠ¨æ€åº“æœ¬èº«`*.dll`ã€‚
# ç¡®ä¿å°†`*.dll`æ–‡ä»¶æ”¾åœ¨å¯æ‰§è¡Œæ–‡ä»¶ç›¸åŒçš„ç›®å½•ä¸­ï¼Œæˆ–è€…åœ¨ç³»ç»Ÿçš„`PATH`ç¯å¢ƒå˜é‡ä¸­åŒ…å«åº“æ–‡ä»¶çš„ç›®å½•ã€‚
```


#### 4. æŒ‡å®š`å¤´æ–‡ä»¶æœç´¢è·¯å¾„`

```cmake
target_include_directories(${PROJECT_NAME}
    PRIVATE
    ${jsoncpp_INCLUDE_DIRS}
)
```


#### 5. æŒ‡å®š`åº“æ–‡ä»¶æœç´¢è·¯å¾„`

```cmake
target_link_directories(${PROJECT_NAME}
    PRIVATE
    ${jsoncpp_LIBRARY_PATH}
)
```


#### 6. é“¾æ¥`åº“æ–‡ä»¶`

```cmake
target_link_libraries(${PROJECT_NAME}
    PRIVATE
    ${jsoncpp_LIBRARIES}
)
```

### å®Œæ•´ä»£ç 

```cmake
cmake_minimum_required(VERSION 3.14)
project(jsoncpp_demo)

# jsoncppå¤´æ–‡ä»¶ç›®å½•
set(jsoncpp_INCLUDE_DIRS "E:/Cpp/Libs/jsoncpp/include")
# jsoncppåº“ç›®å½•
set(jsoncpp_LIBRARY_PATH "E:/Cpp/Libs/jsoncpp/bin/release")
# jsoncppä½¿ç”¨çš„åº“æ–‡ä»¶
set(jsoncpp_LIBRARIES "libjsoncpp_static.a")

aux_source_directory(${CMAKE_CURRENT_SOURCE_DIR} SOURCES)

add_executable(${PROJECT_NAME} ${SOURCES})

target_include_directories(${PROJECT_NAME}
    PRIVATE
    ${jsoncpp_INCLUDE_DIRS}
)

target_link_directories(${PROJECT_NAME}
    PRIVATE
    ${jsoncpp_LIBRARY_PATH}
)

target_link_libraries(${PROJECT_NAME}
    PRIVATE
    ${jsoncpp_LIBRARIES}
)


message("jsoncppå¤´æ–‡ä»¶ç›®å½•: ${jsoncpp_INCLUDE_DIRS}")
message("jsoncppåº“æ–‡ä»¶ç›®å½•: ${jsoncpp_LIBRARY_PATH}")
message("jsoncppåº“æ–‡ä»¶: ${jsoncpp_LIBRARIES}")
message("æºæ–‡ä»¶: ${SOURCES}")
```



## äºŒã€ `find_package`è‡ªåŠ¨å¼•å…¥

`find_package`è‡ªåŠ¨åˆ°å¼•å…¥çš„æ–¹å¼ç­‰æˆ‘ç†Ÿç»ƒä¹‹åæ›´æ–°ğŸ˜•